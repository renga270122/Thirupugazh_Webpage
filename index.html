<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thiruppugazh - A Tribute to Arunagiri Nadhar</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;700&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; }
        .tamil-font { font-family: 'Noto Sans Tamil', sans-serif; }
        .hero-bg { background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url('https://images.unsplash.com/photo-1544005313-94ddf0286df2?auto=format&fit=crop&q=80&w=2000'); background-size: cover; background-position: center; }
        .song-card:hover { transform: translateY(-5px); transition: 0.3s; }
        .search-container { max-width: 600px; }
        .voice-btn { cursor: pointer; }
        .voice-btn.listening { animation: pulse 1.5s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .record-controls { display: none; }
        .record-controls.active { display: block; }
    </style>
</head>
<body class="bg-stone-50 text-gray-900">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm p-4 sticky top-0 z-50">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-bold text-orange-800">Thiruppugazh <span class="text-xs font-normal text-gray-500 block italic">A Tribute to Arunagiri Nadhar</span></h1>
            <div class="hidden md:flex space-x-8 text-sm font-semibold uppercase tracking-wider text-gray-600">
                <a href="#library" class="hover:text-orange-700">The Library</a>
                <a href="#about" class="hover:text-orange-700">About</a>
            </div>
        </div>
    </nav>

    <!-- Hero -->
    <header class="hero-bg h-[450px] flex flex-col items-center justify-center text-center text-white px-6">
        <h2 class="text-5xl md:text-7xl font-bold mb-4 tracking-tight">Divine Rhythms</h2>
        <p class="text-lg md:text-2xl font-light max-w-2xl opacity-80">Experience the divine hymns composed by Saint Arunagiri Nadhar in praise of Lord Murugan.</p>
        <a href="#library" class="mt-8 bg-orange-600 hover:bg-orange-700 px-10 py-3 rounded-full font-bold transition">Explore Songs</a>
    </header>

    <!-- Library Section -->
    <main id="library" class="container mx-auto py-20 px-4">
        <div class="flex flex-col md:flex-row justify-between items-center mb-16 border-b pb-8">
            <h3 class="text-4xl font-bold text-gray-800">The Song Library</h3>
        </div>

        <!-- Search Section -->
        <div class="search-container mx-auto mb-12">
            <div class="flex gap-2 mb-4">
                <input type="text" id="searchInput" placeholder="Search by song name or number..." class="flex-1 px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:border-orange-500">
                <button id="voiceSearchBtn" class="voice-btn bg-orange-600 hover:bg-orange-700 text-white px-6 py-3 rounded-lg font-bold transition flex items-center gap-2">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.91-3c-.49 0-.9.36-.98.85C16.52 14.2 14.47 16 12 16s-4.52-1.8-4.93-4.15c-.08-.49-.49-.85-.98-.85-.61 0-1.09.54-1 1.14.49 3 2.89 5.35 5.91 5.78V20c0 .55.45 1 1 1s1-.45 1-1v-2.08c3.02-.43 5.42-2.78 5.91-5.78.1-.6-.39-1.14-1-1.14z"/></svg>
                    Voice Search
                </button>
            </div>
            <p class="text-sm text-gray-500 text-center">Search for your favorite Thiruppugazh songs by name or song number</p>
        </div>

        <div id="songList" class="grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
            
            <!-- SONG CARD 1: Muthai Tharu -->
            <div class="song-card bg-white rounded-2xl shadow-sm border p-6 flex flex-col" data-song-name="Muthai Tharu" data-song-number="1">
                <div class="mb-4">
                    <span class="text-[10px] font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded uppercase">Song #1</span>
                    <h4 class="text-xl font-bold mt-2">Muthai Tharu</h4>
                    <p class="text-xs text-gray-400 font-semibold uppercase mt-1">Sthalam: Thiruchendur</p>
                </div>
                <div class="bg-stone-50 p-3 rounded-xl mb-6 flex-grow">
                    <p class="tamil-font text-sm leading-relaxed text-gray-700">முத்தைத்தரு பத்தித் திருநகை...</p>
                    <p class="text-[10px] text-gray-400 mt-2">Raga: Shanmukhapriya</p>
                </div>
                <div class="flex gap-2 mb-3">
                    <a href="#" onclick="showLyrics(1, 'tamil'); return false;" class="flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-orange-700 transition text-center">
                        Tamil Lyrics
                    </a>
                    <a href="#" onclick="showLyrics(1, 'english'); return false;" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-blue-700 transition text-center">
                        English
                    </a>
                </div>
                <button onclick="toggleRecordControls(1)" class="w-full bg-stone-900 text-white py-2 rounded-lg text-sm font-bold hover:bg-stone-700 transition">
                    Record Your Voice
                </button>
                <div id="recordControls1" class="record-controls mt-3 p-3 bg-gray-50 rounded-lg">
                    <div class="flex gap-2">
                        <button onclick="startRecording(1)" class="flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-red-700">Start</button>
                        <button onclick="stopRecording(1)" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-gray-700">Stop</button>
                        <button onclick="downloadRecording(1)" class="flex-1 bg-green-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-green-700">Download</button>
                    </div>
                </div>
            </div>

            <!-- SONG CARD 2: Naatha Vinthu -->
            <div class="song-card bg-white rounded-2xl shadow-sm border p-6 flex flex-col" data-song-name="Naatha Vinthu" data-song-number="2">
                <div class="mb-4">
                    <span class="text-[10px] font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded uppercase">Song #2</span>
                    <h4 class="text-xl font-bold mt-2">Naatha Vinthu</h4>
                    <p class="text-xs text-gray-400 font-semibold uppercase mt-1">Sthalam: General</p>
                </div>
                <div class="bg-stone-50 p-3 rounded-xl mb-6 flex-grow">
                    <p class="tamil-font text-sm leading-relaxed text-gray-700">நாத விந்துகலாதி நமோநம...</p>
                    <p class="text-[10px] text-gray-400 mt-2">Raga: Senjurutti</p>
                </div>
                <div class="flex gap-2 mb-3">
                    <a href="#" onclick="showLyrics(2, 'tamil'); return false;" class="flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-orange-700 transition text-center">
                        Tamil Lyrics
                    </a>
                    <a href="#" onclick="showLyrics(2, 'english'); return false;" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-blue-700 transition text-center">
                        English
                    </a>
                </div>
                <button onclick="toggleRecordControls(2)" class="w-full bg-stone-900 text-white py-2 rounded-lg text-sm font-bold hover:bg-stone-700 transition">
                    Record Your Voice
                </button>
                <div id="recordControls2" class="record-controls mt-3 p-3 bg-gray-50 rounded-lg">
                    <div class="flex gap-2">
                        <button onclick="startRecording(2)" class="flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-red-700">Start</button>
                        <button onclick="stopRecording(2)" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-gray-700">Stop</button>
                        <button onclick="downloadRecording(2)" class="flex-1 bg-green-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-green-700">Download</button>
                    </div>
                </div>
            </div>

            <!-- SONG CARD 3: Viral Maaran -->
            <div class="song-card bg-white rounded-2xl shadow-sm border p-6 flex flex-col" data-song-name="Viral Maaran" data-song-number="3">
                <div class="mb-4">
                    <span class="text-[10px] font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded uppercase">Song #3</span>
                    <h4 class="text-xl font-bold mt-2">Viral Maaran</h4>
                    <p class="text-xs text-gray-400 font-semibold uppercase mt-1">Sthalam: Thiruchendur</p>
                </div>
                <div class="bg-stone-50 p-3 rounded-xl mb-6 flex-grow">
                    <p class="tamil-font text-sm leading-relaxed text-gray-700">விறல்மார னைந்து மலர்வாளி சிந்த...</p>
                    <p class="text-[10px] text-gray-400 mt-2">Raga: Ragamalika</p>
                </div>
                <div class="flex gap-2 mb-3">
                    <a href="#" onclick="showLyrics(3, 'tamil'); return false;" class="flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-orange-700 transition text-center">
                        Tamil Lyrics
                    </a>
                    <a href="#" onclick="showLyrics(3, 'english'); return false;" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-blue-700 transition text-center">
                        English
                    </a>
                </div>
                <button onclick="toggleRecordControls(3)" class="w-full bg-stone-900 text-white py-2 rounded-lg text-sm font-bold hover:bg-stone-700 transition">
                    Record Your Voice
                </button>
                <div id="recordControls3" class="record-controls mt-3 p-3 bg-gray-50 rounded-lg">
                    <div class="flex gap-2">
                        <button onclick="startRecording(3)" class="flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-red-700">Start</button>
                        <button onclick="stopRecording(3)" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-gray-700">Stop</button>
                        <button onclick="downloadRecording(3)" class="flex-1 bg-green-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-green-700">Download</button>
                    </div>
                </div>
            </div>

            <!-- SONG CARD 4: Thondhi Sariya -->
            <div class="song-card bg-white rounded-2xl shadow-sm border p-6 flex flex-col" data-song-name="Thondhi Sariya" data-song-number="4">
                <div class="mb-4">
                    <span class="text-[10px] font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded uppercase">Song #4</span>
                    <h4 class="text-xl font-bold mt-2">Thondhi Sariya</h4>
                    <p class="text-xs text-gray-400 font-semibold uppercase mt-1">Sthalam: Thiruchendur</p>
                </div>
                <div class="bg-stone-50 p-3 rounded-xl mb-6 flex-grow">
                    <p class="tamil-font text-sm leading-relaxed text-gray-700">தொந்தி சரிய மயிரே வெளிற...</p>
                    <p class="text-[10px] text-gray-400 mt-2">Raga: Kambhoji</p>
                </div>
                <div class="flex gap-2 mb-3">
                    <a href="#" onclick="showLyrics(4, 'tamil'); return false;" class="flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-orange-700 transition text-center">
                        Tamil Lyrics
                    </a>
                    <a href="#" onclick="showLyrics(4, 'english'); return false;" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-blue-700 transition text-center">
                        English
                    </a>
                </div>
                <button onclick="toggleRecordControls(4)" class="w-full bg-stone-900 text-white py-2 rounded-lg text-sm font-bold hover:bg-stone-700 transition">
                    Record Your Voice
                </button>
                <div id="recordControls4" class="record-controls mt-3 p-3 bg-gray-50 rounded-lg">
                    <div class="flex gap-2">
                        <button onclick="startRecording(4)" class="flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-red-700">Start</button>
                        <button onclick="stopRecording(4)" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-gray-700">Stop</button>
                        <button onclick="downloadRecording(4)" class="flex-1 bg-green-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-green-700">Download</button>
                    </div>
                </div>
            </div>

            <!-- SONG CARD 5: Irumal -->
            <div class="song-card bg-white rounded-2xl shadow-sm border p-6 flex flex-col" data-song-name="Irumal" data-song-number="5">
                <div class="mb-4">
                    <span class="text-[10px] font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded uppercase">Song #5</span>
                    <h4 class="text-xl font-bold mt-2">Irumal</h4>
                    <p class="text-xs text-gray-400 font-semibold uppercase mt-1">Sthalam: Thiruthani</p>
                </div>
                <div class="bg-stone-50 p-3 rounded-xl mb-6 flex-grow">
                    <p class="tamil-font text-sm leading-relaxed text-gray-700">இருமலு ரோக முயலகன்...</p>
                    <p class="text-[10px] text-gray-400 mt-2">Raga: Hamsadhwani</p>
                </div>
                <div class="flex gap-2 mb-3">
                    <a href="#" onclick="showLyrics(5, 'tamil'); return false;" class="flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-orange-700 transition text-center">
                        Tamil Lyrics
                    </a>
                    <a href="#" onclick="showLyrics(5, 'english'); return false;" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-blue-700 transition text-center">
                        English
                    </a>
                </div>
                <button onclick="toggleRecordControls(5)" class="w-full bg-stone-900 text-white py-2 rounded-lg text-sm font-bold hover:bg-stone-700 transition">
                    Record Your Voice
                </button>
                <div id="recordControls5" class="record-controls mt-3 p-3 bg-gray-50 rounded-lg">
                    <div class="flex gap-2">
                        <button onclick="startRecording(5)" class="flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-red-700">Start</button>
                        <button onclick="stopRecording(5)" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-gray-700">Stop</button>
                        <button onclick="downloadRecording(5)" class="flex-1 bg-green-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-green-700">Download</button>
                    </div>
                </div>
            </div>

            <!-- SONG CARD 6: Agaramudhalena -->
            <div class="song-card bg-white rounded-2xl shadow-sm border p-6 flex flex-col" data-song-name="Agaramudhalena" data-song-number="6">
                <div class="mb-4">
                    <span class="text-[10px] font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded uppercase">Song #6</span>
                    <h4 class="text-xl font-bold mt-2">Agaramudhalena</h4>
                    <p class="text-xs text-gray-400 font-semibold uppercase mt-1">Sthalam: Pazhamudir Cholai</p>
                </div>
                <div class="bg-stone-50 p-3 rounded-xl mb-6 flex-grow">
                    <p class="tamil-font text-sm leading-relaxed text-gray-700">அகரமுத லெனவுரைசெய்...</p>
                    <p class="text-[10px] text-gray-400 mt-2">Raga: Sindubhairavi</p>
                </div>
                <div class="flex gap-2 mb-3">
                    <a href="#" onclick="showLyrics(6, 'tamil'); return false;" class="flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-orange-700 transition text-center">
                        Tamil Lyrics
                    </a>
                    <a href="#" onclick="showLyrics(6, 'english'); return false;" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-blue-700 transition text-center">
                        English
                    </a>
                </div>
                <button onclick="toggleRecordControls(6)" class="w-full bg-stone-900 text-white py-2 rounded-lg text-sm font-bold hover:bg-stone-700 transition">
                    Record Your Voice
                </button>
                <div id="recordControls6" class="record-controls mt-3 p-3 bg-gray-50 rounded-lg">
                    <div class="flex gap-2">
                        <button onclick="startRecording(6)" class="flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-red-700">Start</button>
                        <button onclick="stopRecording(6)" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-gray-700">Stop</button>
                        <button onclick="downloadRecording(6)" class="flex-1 bg-green-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-green-700">Download</button>
                    </div>
                </div>
            </div>

            <!-- SONG CARD 7: Agaramumaagi -->
            <div class="song-card bg-white rounded-2xl shadow-sm border p-6 flex flex-col" data-song-name="Agaramumaagi" data-song-number="7">
                <div class="mb-4">
                    <span class="text-[10px] font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded uppercase">Song #7</span>
                    <h4 class="text-xl font-bold mt-2">Agaramumaagi</h4>
                    <p class="text-xs text-gray-400 font-semibold uppercase mt-1">Sthalam: Pazhamudir Cholai</p>
                </div>
                <div class="bg-stone-50 p-3 rounded-xl mb-6 flex-grow">
                    <p class="tamil-font text-sm leading-relaxed text-gray-700">அகரமு மாகி யதிபனு மாகி...</p>
                    <p class="text-[10px] text-gray-400 mt-2">Raga: Ragamalika</p>
                </div>
                <div class="flex gap-2 mb-3">
                    <a href="#" onclick="showLyrics(7, 'tamil'); return false;" class="flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-orange-700 transition text-center">
                        Tamil Lyrics
                    </a>
                    <a href="#" onclick="showLyrics(7, 'english'); return false;" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-blue-700 transition text-center">
                        English
                    </a>
                </div>
                <button onclick="toggleRecordControls(7)" class="w-full bg-stone-900 text-white py-2 rounded-lg text-sm font-bold hover:bg-stone-700 transition">
                    Record Your Voice
                </button>
                <div id="recordControls7" class="record-controls mt-3 p-3 bg-gray-50 rounded-lg">
                    <div class="flex gap-2">
                        <button onclick="startRecording(7)" class="flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-red-700">Start</button>
                        <button onclick="stopRecording(7)" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-gray-700">Stop</button>
                        <button onclick="downloadRecording(7)" class="flex-1 bg-green-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-green-700">Download</button>
                    </div>
                </div>
            </div>

            <!-- SONG CARD 8: Kaithala Niraikani -->
            <div class="song-card bg-white rounded-2xl shadow-sm border p-6 flex flex-col" data-song-name="Kaithala Niraikani" data-song-number="8">
                <div class="mb-4">
                    <span class="text-[10px] font-bold text-gray-600 bg-gray-50 px-2 py-1 rounded uppercase">Song #8</span>
                    <h4 class="text-xl font-bold mt-2">Kaithala Niraikani</h4>
                    <p class="text-xs text-gray-400 font-semibold uppercase mt-1">Sthalam: General/Ganesha</p>
                </div>
                <div class="bg-stone-50 p-3 rounded-xl mb-6 flex-grow">
                    <p class="tamil-font text-sm leading-relaxed text-gray-700">கைத்தல நிறைகனி அப்பமொடு...</p>
                    <p class="text-[10px] text-gray-400 mt-2">Raga: Nattai</p>
                </div>
                <div class="flex gap-2 mb-3">
                    <a href="#" onclick="showLyrics(8, 'tamil'); return false;" class="flex-1 bg-orange-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-orange-700 transition text-center">
                        Tamil Lyrics
                    </a>
                    <a href="#" onclick="showLyrics(8, 'english'); return false;" class="flex-1 bg-blue-600 text-white py-2 px-3 rounded-lg text-sm font-bold hover:bg-blue-700 transition text-center">
                        English
                    </a>
                </div>
                <button onclick="toggleRecordControls(8)" class="w-full bg-stone-900 text-white py-2 rounded-lg text-sm font-bold hover:bg-stone-700 transition">
                    Record Your Voice
                </button>
                <div id="recordControls8" class="record-controls mt-3 p-3 bg-gray-50 rounded-lg">
                    <div class="flex gap-2">
                        <button onclick="startRecording(8)" class="flex-1 bg-red-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-red-700">Start</button>
                        <button onclick="stopRecording(8)" class="flex-1 bg-gray-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-gray-700">Stop</button>
                        <button onclick="downloadRecording(8)" class="flex-1 bg-green-600 text-white py-2 px-3 rounded text-xs font-bold hover:bg-green-700">Download</button>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Script for Search, Voice Search, Lyrics, and Recording -->
    <script>
        // Sample lyrics data (in real application, these would be in a separate file or database)
        const lyricsData = {
            1: {
                tamil: "முத்தைத்தரு பத்தித் திருநகை\nதத்தைத்தகு தந்தத் திருமுகை\nகைத்தலம் வைத்தருள் செய்திடு முகை\nபத்திமை வைத்திடும் பெண்ணை\n\n[Full Tamil lyrics would go here...]",
                english: "With pearl-like teeth and divine smile\nWith elephant-like radiance and holy face\nPlace your hand and grant your grace\nTo those who hold devotion dear\n\n[Full English translation would go here...]"
            },
            2: {
                tamil: "நாத விந்துகலாதி நமோநம\nஓத நினைவுடையோர் முடிதொழும்\nபாத பங்கயமே பவள மணி\nநீத சிலம்புசீர் பழனியானே\n\n[Full Tamil lyrics would go here...]",
                english: "Naadha Vindu the primordial sound, we bow to you\nThose who meditate upon you bow at your feet\nYour lotus feet adorned with coral gems\nWith melodious anklets, O Lord of Pazhani\n\n[Full English translation would go here...]"
            },
            3: {
                tamil: "விறல்மார னைந்து மலர்வாளி சிந்த\nவுறுபாட லன்றுவிடு சூரனுக்கு\nதிறலானவன் றனை வென்ற செவ்வேள்\nநெறியாகிய கறை கண்டத்து நேர்வாய்\n\n[Full Tamil lyrics would go here...]",
                english: "Five powerful arrows scattered the flowers\nThe fierce demon Sura was vanquished that day\nThe victorious red-hued spear-wielding Lord\nWho is the path to the blue-throated one\n\n[Full English translation would go here...]"
            },
            4: {
                tamil: "தொந்தி சரிய மயிரே வெளிற\nமந்தி முகத்தின் வனசரர் பொற\nசிந்தை மருவி இருந்தாய் தனிவன்\nதந்தையும் நீயே தாயு நீயே\n\n[Full Tamil lyrics would go here...]",
                english: "With belly sagging and graying hair\nForest dwellers with monkey-like faces\nYou stayed in their hearts and thoughts alone\nYou are both father and mother\n\n[Full English translation would go here...]"
            },
            5: {
                tamil: "இருமலு ரோக முயலகன்\nபருமலை கொண்ட படைவேலன்\nதிருமலை வாழ் குமரேச செவ்வேல்\nகருமலை போல் மேனி கழுதின் மேல்\n\n[Full Tamil lyrics would go here...]",
                english: "Cough and diseases you eliminate\nHe who wields the spear that conquers great mountains\nThe lord Kumara dwelling on sacred hills with red spear\nWith a body dark as the mountain on the peacock\n\n[Full English translation would go here...]"
            },
            6: {
                tamil: "அகரமுத லெனவுரைசெய்\nமகரமிறுதி என மொழிவிக்கும்\nநிகர் இலது எனசெப்பும் நேர்மையால்\nபகர்வது உண்மை பழமுதிர் சோலையே\n\n[Full Tamil lyrics would go here...]",
                english: "Starting with the letter 'A'\nEnding with the letter 'Ma'\nUnique and incomparable in truth\nWhat we speak is the truth of Pazhamudhir Cholai\n\n[Full English translation would go here...]"
            },
            7: {
                tamil: "அகரமு மாகி யதிபனு மாகி\nயிகரமு மாகி யீன்றெடுத் தாள் அன்னை\nதிகழும் பெருமா னுயிர்த்தநா தன் பெயர்க்\nகுகனென வாம் குமரேச குருபரனே\n\n[Full Tamil lyrics would go here...]",
                english: "Becoming the letter 'A' and the lord\nBecoming 'I', the mother who gave birth\nTo the radiant Lord, the life-giving Naadhan whose name\nIs Guha, we say, O Kumaresa, Supreme teacher\n\n[Full English translation would go here...]"
            },
            8: {
                tamil: "கைத்தல நிறைகனி அப்பமொடு\nபைத்தல மொழியும் கணபதிக்கு\nநித்தலும் வணங்கி நிறை மனமே\nசித்தமது எண்ணி தெளிவுற்றிடே\n\n[Full Tamil lyrics would go here...]",
                english: "Fruits filling the palms and sweet rice cakes\nFor Ganapati who speaks sweet words\nAlways bow with full heart\nThink with clear mind and gain clarity\n\n[Full English translation would go here...]"
            }
        };

        // Recording variables - track per song
        const recordingState = new Map(); // Map of songId -> {mediaRecorder, audioChunks}

        // Search functionality
        const searchInput = document.getElementById('searchInput');
        const songCards = document.querySelectorAll('.song-card');
        
        searchInput.addEventListener('input', function() {
            const searchTerm = this.value.toLowerCase();
            
            songCards.forEach(card => {
                const songName = card.getAttribute('data-song-name').toLowerCase();
                const songNumber = card.getAttribute('data-song-number');
                
                if (songName.includes(searchTerm) || songNumber.includes(searchTerm)) {
                    card.style.display = 'flex';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Voice search functionality
        const voiceSearchBtn = document.getElementById('voiceSearchBtn');
        let recognition;
        
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.interimResults = false;
            recognition.lang = 'en-US';
            
            recognition.onresult = function(event) {
                const transcript = event.results[0][0].transcript;
                searchInput.value = transcript;
                searchInput.dispatchEvent(new Event('input'));
                voiceSearchBtn.classList.remove('listening');
            };
            
            recognition.onerror = function(event) {
                voiceSearchBtn.classList.remove('listening');
                alert('Voice search error: ' + (event.error || 'Unknown error') + '. Please try again.');
            };
            
            recognition.onend = function() {
                voiceSearchBtn.classList.remove('listening');
            };
            
            voiceSearchBtn.addEventListener('click', function() {
                if (voiceSearchBtn.classList.contains('listening')) {
                    recognition.stop();
                } else {
                    voiceSearchBtn.classList.add('listening');
                    recognition.start();
                }
            });
        } else {
            voiceSearchBtn.addEventListener('click', function() {
                alert('Voice search is not supported in your browser. Please use Chrome or Edge.');
            });
        }

        // Show lyrics function
        function showLyrics(songId, language) {
            const lyrics = lyricsData[songId];
            if (lyrics && lyrics[language]) {
                const modal = document.createElement('div');
                modal.className = 'fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4';
                modal.innerHTML = `
                    <div class="bg-white rounded-2xl max-w-3xl w-full max-h-[80vh] overflow-y-auto p-8">
                        <div class="flex justify-between items-center mb-6">
                            <h3 class="text-2xl font-bold ${language === 'tamil' ? 'tamil-font' : ''}">
                                ${language === 'tamil' ? 'தமிழ் பாடல் வரிகள்' : 'Lyrics in English'}
                            </h3>
                            <button onclick="this.parentElement.parentElement.parentElement.remove()" class="text-3xl text-gray-500 hover:text-gray-800">&times;</button>
                        </div>
                        <div class="whitespace-pre-wrap ${language === 'tamil' ? 'tamil-font text-lg' : 'text-base'} leading-relaxed">
                            ${lyrics[language]}
                        </div>
                    </div>
                `;
                document.body.appendChild(modal);
                modal.addEventListener('click', function(e) {
                    if (e.target === modal) {
                        modal.remove();
                    }
                });
            } else {
                alert('Lyrics not available for this song.');
            }
        }

        // Toggle record controls
        function toggleRecordControls(songId) {
            const controls = document.getElementById('recordControls' + songId);
            controls.classList.toggle('active');
        }

        // Start recording
        async function startRecording(songId) {
            try {
                // Stop any existing recording for this song
                if (recordingState.has(songId)) {
                    const state = recordingState.get(songId);
                    if (state.mediaRecorder && state.mediaRecorder.state === 'recording') {
                        state.mediaRecorder.stop();
                        state.mediaRecorder.stream.getTracks().forEach(track => track.stop());
                    }
                }
                
                const stream = await navigator.mediaDevices.getUserMedia({ audio: true });
                const mediaRecorder = new MediaRecorder(stream);
                const audioChunks = [];
                
                mediaRecorder.ondataavailable = function(event) {
                    audioChunks.push(event.data);
                };
                
                recordingState.set(songId, { mediaRecorder, audioChunks });
                mediaRecorder.start();
                alert('Recording started! Sing along with the lyrics.');
            } catch (error) {
                alert('Could not access microphone. Please allow microphone access.');
            }
        }

        // Stop recording
        function stopRecording(songId) {
            if (!recordingState.has(songId)) {
                alert('No active recording for this song.');
                return;
            }
            
            const state = recordingState.get(songId);
            if (state.mediaRecorder && state.mediaRecorder.state === 'recording') {
                state.mediaRecorder.stop();
                state.mediaRecorder.stream.getTracks().forEach(track => track.stop());
                alert('Recording stopped! Click Download to save your recording.');
            } else {
                alert('No active recording for this song.');
            }
        }

        // Download recording
        function downloadRecording(songId) {
            if (!recordingState.has(songId)) {
                alert('No recording available for this song. Please record first.');
                return;
            }
            
            const state = recordingState.get(songId);
            if (state.audioChunks.length === 0) {
                alert('No recording available for this song. Please record first.');
                return;
            }
            
            // Determine MIME type and extension
            const mimeType = state.mediaRecorder.mimeType || 'audio/webm';
            const extension = mimeType.includes('webm') ? 'webm' : (mimeType.includes('ogg') ? 'ogg' : 'webm');
            
            const audioBlob = new Blob(state.audioChunks, { type: mimeType });
            const audioUrl = URL.createObjectURL(audioBlob);
            const a = document.createElement('a');
            a.href = audioUrl;
            a.download = `Thiruppugazh_Song_${songId}_${new Date().getTime()}.${extension}`;
            a.click();
            URL.revokeObjectURL(audioUrl);
        }
    </script>

    <footer class="bg-orange-950 text-white py-20">
        <div class="container mx-auto px-4 text-center">
            <h5 class="text-2xl font-bold mb-4">A Tribute to Arunagiri Nadhar</h5>
            <p class="text-orange-200/60 text-sm max-w-lg mx-auto leading-loose mb-6">
                This project is dedicated to preserving and sharing the divine hymns of Thiruppugazh composed by the great saint Arunagiri Nadhar in praise of Lord Murugan.
            </p>
            <div class="mb-4">
                <a href="https://soulvest.ai" target="_blank" class="text-orange-200 hover:text-white text-sm font-semibold transition">
                    Powered by soulvest.ai
                </a>
            </div>
            <div class="mt-12 pt-12 border-t border-white/10 text-xs text-white/30">
                &copy; 2024 Thiruppugazh Digital Initiative.
            </div>
        </div>
    </footer>

</body>
</html>
